Thu Dec 15 00:31:46 2022 - INFO  - Start environmental preparation.
Thu Dec 15 00:33:43 2022 - INFO  - End of environmental preparation!
Thu Dec 15 00:33:44 2022 - INFO  - Start testing...
usage: tsdb [<flags>] <command> [<args> ...]
usage: tsdb [<flags>] <command> [<args> ...]
.SH "DESCRIPTION"
usage: tsdb [<flags>] <command> [<args> ...]
usage: tsdb bench write [<flags>] [<file>]
level=info ts=2022-12-14T16:33:46.542724739Z caller=head.go:641 msg="Replaying on-disk memory mappable chunks if any"
level=info ts=2022-12-14T16:33:46.554272943Z caller=head.go:655 msg="On-disk memory mappable chunks replay completed" duration=1.082934ms
level=info ts=2022-12-14T16:33:46.555410374Z caller=head.go:661 msg="Replaying WAL, this may take a while"
level=info ts=2022-12-14T16:33:46.573242599Z caller=head.go:713 msg="WAL segment loaded" segment=0 maxSegment=0
level=info ts=2022-12-14T16:33:46.574938596Z caller=head.go:716 msg="WAL replay completed" checkpoint_replay_duration=5.736354ms wal_replay_duration=12.555843ms total_replay_duration=22.226659ms
level=info ts=2022-12-14T16:34:12.830319032Z caller=compact.go:495 msg="write block" mint=30000 maxt=7200000 ulid=01GM8QRPKSWP4303TA2DEE7AES duration=12.386869259s
level=info ts=2022-12-14T16:34:14.060899982Z caller=head.go:804 msg="Head GC completed" duration=173.927597ms
level=info ts=2022-12-14T16:34:28.828545587Z caller=compact.go:495 msg="write block" mint=7200000 maxt=14400000 ulid=01GM8QS57BQB0MDD7G7WQMA0Z4 duration=13.425311687s
level=info ts=2022-12-14T16:34:30.023296758Z caller=head.go:804 msg="Head GC completed" duration=130.790011ms
level=info ts=2022-12-14T16:34:44.779850121Z caller=compact.go:495 msg="write block" mint=14400000 maxt=21600000 ulid=01GM8QSMM8TF7CT0FHDE34BYXH duration=13.602991996s
level=info ts=2022-12-14T16:34:45.916206027Z caller=head.go:804 msg="Head GC completed" duration=249.03122ms
level=info ts=2022-12-14T16:34:58.128945521Z caller=compact.go:495 msg="write block" mint=21600000 maxt=28800000 ulid=01GM8QT42GAV2K1DAJRHE0TWWZ duration=11.136433218s
level=info ts=2022-12-14T16:34:59.01521213Z caller=head.go:804 msg="Head GC completed" duration=127.280775ms
level=info ts=2022-12-14T16:34:59.341715727Z caller=checkpoint.go:96 msg="Creating checkpoint" from_segment=0 to_segment=1 mint=28800000
level=info ts=2022-12-14T16:35:23.29595324Z caller=head.go:884 msg="WAL checkpoint complete" first=0 last=1 duration=23.977390122s
>> completed stage=readData duration=2.266778989s
ingestion completed
>> completed stage=ingestScrapes duration=1m33.622456986s
>> completed stage=stopStorage duration=2.307585762s
level=info ts=2022-12-14T16:35:25.327470714Z caller=head.go:641 msg="Replaying on-disk memory mappable chunks if any"
level=info ts=2022-12-14T16:35:25.329791379Z caller=head.go:655 msg="On-disk memory mappable chunks replay completed" duration=367.795µs
level=info ts=2022-12-14T16:35:25.33038427Z caller=head.go:661 msg="Replaying WAL, this may take a while"
level=info ts=2022-12-14T16:35:25.349277086Z caller=head.go:713 msg="WAL segment loaded" segment=0 maxSegment=0
level=info ts=2022-12-14T16:35:25.350301571Z caller=head.go:716 msg="WAL replay completed" checkpoint_replay_duration=1.136183ms wal_replay_duration=18.048829ms total_replay_duration=20.766188ms
>> start stage=readData
>> completed stage=readData duration=2.369629628s
>> start stage=ingestScrapes
level=info ts=2022-12-14T16:35:50.039172784Z caller=compact.go:495 msg="write block" mint=30000 maxt=7200000 ulid=01GM8QVPN0V1DJECYSH7MTJYT7 duration=11.254375991s
level=info ts=2022-12-14T16:35:51.090233507Z caller=head.go:804 msg="Head GC completed" duration=103.236763ms
level=info ts=2022-12-14T16:36:03.760061405Z caller=compact.go:495 msg="write block" mint=7200000 maxt=14400000 ulid=01GM8QW41J938AGMZQACYFQV9N duration=11.26135882s
level=info ts=2022-12-14T16:36:04.41296597Z caller=head.go:804 msg="Head GC completed" duration=196.819628ms
level=info ts=2022-12-14T16:36:18.810638658Z caller=compact.go:495 msg="write block" mint=14400000 maxt=21600000 ulid=01GM8QWGYHCJNN4D7P35H9FGBZ duration=13.091325625s
level=info ts=2022-12-14T16:36:19.898989526Z caller=head.go:804 msg="Head GC completed" duration=189.240409ms
level=info ts=2022-12-14T16:36:35.840809139Z caller=compact.go:495 msg="write block" mint=21600000 maxt=28800000 ulid=01GM8QX10Z1J4C43N2T9JJQ8NN duration=13.664879594s
level=info ts=2022-12-14T16:36:36.9248055Z caller=head.go:804 msg="Head GC completed" duration=132.15662ms
level=info ts=2022-12-14T16:36:37.104116613Z caller=checkpoint.go:96 msg="Creating checkpoint" from_segment=0 to_segment=1 mint=28800000
level=info ts=2022-12-14T16:37:06.403060894Z caller=head.go:884 msg="WAL checkpoint complete" first=0 last=1 duration=29.320025758s
ingestion completed
>> completed stage=ingestScrapes duration=1m40.208855775s
 > total samples: 30000000
 > samples/sec: 299373.3653858681
>> start stage=stopStorage
level=error ts=2022-12-14T16:37:08.047675173Z caller=db.go:685 msg="compaction failed" err="persist head block: 2 errors: write compaction: context canceled; context canceled"
>> completed stage=stopStorage duration=625.696746ms
level=info ts=2022-12-14T16:37:09.716108031Z caller=head.go:641 msg="Replaying on-disk memory mappable chunks if any"
level=info ts=2022-12-14T16:37:09.718529359Z caller=head.go:655 msg="On-disk memory mappable chunks replay completed" duration=129.913µs
level=info ts=2022-12-14T16:37:09.719220424Z caller=head.go:661 msg="Replaying WAL, this may take a while"
level=info ts=2022-12-14T16:37:09.739596543Z caller=head.go:713 msg="WAL segment loaded" segment=0 maxSegment=0
level=info ts=2022-12-14T16:37:09.740664944Z caller=head.go:716 msg="WAL replay completed" checkpoint_replay_duration=5.084779ms wal_replay_duration=14.893802ms total_replay_duration=22.069279ms
level=info ts=2022-12-14T16:37:10.79963038Z caller=compact.go:495 msg="write block" mint=30000 maxt=7200000 ulid=01GM8QYG4S5EBPZPP8W12F33ZM duration=373.667758ms
level=info ts=2022-12-14T16:37:10.868734645Z caller=head.go:804 msg="Head GC completed" duration=16.300325ms
level=info ts=2022-12-14T16:37:11.814489212Z caller=compact.go:495 msg="write block" mint=7200000 maxt=14400000 ulid=01GM8QYGN1T28G8G1A5TBCE1WG duration=868.741863ms
level=info ts=2022-12-14T16:37:11.899641825Z caller=head.go:804 msg="Head GC completed" duration=29.635154ms
level=info ts=2022-12-14T16:37:12.315523376Z caller=compact.go:495 msg="write block" mint=14400000 maxt=21600000 ulid=01GM8QYHP229YPP80E1587DBCY duration=313.129202ms
level=info ts=2022-12-14T16:37:12.375930951Z caller=head.go:804 msg="Head GC completed" duration=13.242122ms
level=info ts=2022-12-14T16:37:12.788593239Z caller=compact.go:495 msg="write block" mint=21600000 maxt=28800000 ulid=01GM8QYJ4M67711ZWHKA8D2TMK duration=319.6254ms
level=info ts=2022-12-14T16:37:12.872131149Z caller=head.go:804 msg="Head GC completed" duration=26.065206ms
level=info ts=2022-12-14T16:37:12.916096107Z caller=checkpoint.go:96 msg="Creating checkpoint" from_segment=0 to_segment=1 mint=28800000
level=info ts=2022-12-14T16:37:13.300551208Z caller=head.go:884 msg="WAL checkpoint complete" first=0 last=1 duration=391.572058ms
>> completed stage=readData duration=31.300749ms
ingestion completed
>> completed stage=ingestScrapes duration=3.489890664s
>> completed stage=stopStorage duration=286.567872ms
usage: tsdb ls [<flags>] [<db path>]
BLOCK ULID                  MIN TIME  MAX TIME  NUM SAMPLES  NUM CHUNKS  NUM SERIES
BLOCK ULID                  MIN TIME  MAX TIME  NUM SAMPLES  NUM CHUNKS  NUM SERIES
BLOCK ULID                  MIN TIME  MAX TIME  NUM SAMPLES  NUM CHUNKS  NUM SERIES
usage: tsdb analyze [<flags>] [<db path>] [<block id>]
Block ID: 01GM8QYG4S5EBPZPP8W12F33ZM
Thu Dec 15 00:37:20 2022 - INFO  - Finish test!
Thu Dec 15 00:37:21 2022 - INFO  - succeed to execute the case.
Thu Dec 15 00:37:23 2022 - INFO  - start environment cleanup.
Thu Dec 15 00:37:57 2022 - INFO  - Finish environment cleanup!
