+ source ./common_lib.sh
++ source ../common/common_lib.sh
+++ source /root/mugen-riscv/libs/locallibs/common_lib.sh
++++ python3 --version
++++ '[' 0 -eq 0 ']'
++++ source /root/mugen-riscv/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n function ']'
+ config_params
+ LOG_INFO 'Start to config params of the case.'
+ message='Start to config params of the case.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start to config params of the case.'
Thu Dec 29 05:30:49 2022 - INFO  - Start to config params of the case.
++ GET_FREE_PORT localhost
++ ip=localhost
++ start_port=1000
++ end_port=10000
++ python3 /root/mugen-riscv/libs/locallibs/free_port.py get --ip localhost --start 1000 --end 10000
+ free_port=1198
+ LOG_INFO 'End to config params of the case.'
+ message='End to config params of the case.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'End to config params of the case.'
Thu Dec 29 05:30:50 2022 - INFO  - End to config params of the case.
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
Thu Dec 29 05:30:51 2022 - INFO  - Start environmental preparation.
+ DNF_INSTALL prometheus2
+ pkgs=prometheus2
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen-riscv/libs/locallibs/rpm_manage.py install --pkgs prometheus2 --node 1 --tempfile ''
+ tmpfile2=/tmp/tmp1moeazll
+ '[' -z '' ']'
+ tmpfile=/tmp/tmp1moeazll
+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Thu Dec 29 05:31:53 2022 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Thu Dec 29 05:31:54 2022 - INFO  - Start testing...
+ prometheus --version
+ grep 'prometheus, version'
prometheus, version 2.20.0 (branch: non-git, revision: non-git)
+ CHECK_RESULT 0 0 0 'Failed to output version info.'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to output version info.'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ prometheus --help
+ grep 'usage: prometheus'
usage: prometheus [<flags>]
+ CHECK_RESULT 0 0 0 'Failed to output version info.'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to output version info.'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --config.file=prometheus.yml
Thu Dec 29 05:31:58 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:31:58.433Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:31:59 2022 - INFO  - Prometheus is ready.
+ curl -s localhost:9090/config
+ grep 'job_name: test_prometheus_cli'
- job_name: test_prometheus_cli
+ CHECK_RESULT 0 0 0 'Failed to use specific config file.'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use specific config file.'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 794
+ pgrep -x prometheus
./common_lib.sh: line 38:   794 Killed                  prometheus --config.file="prometheus.yml" > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:01 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --web.listen-address=0.0.0.0:1198
Thu Dec 29 05:32:02 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:32:07.416Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:32:08 2022 - INFO  - Prometheus is ready.
+ curl -s http://localhost:1198
+ grep Found
<a href="/graph">Found</a>.
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.listen-address'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.listen-address'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 821
+ pgrep -x prometheus
./common_lib.sh: line 38:   821 Killed                  prometheus --web.listen-address="0.0.0.0:${free_port}" > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:09 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.read-timeout'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.read-timeout'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ prometheus --web.read-timeout=5m
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 854
+ pgrep -x prometheus
./common_lib.sh: line 38:   854 Killed                  prometheus --web.read-timeout=5m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:10 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.max-connections'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.max-connections'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ prometheus --web.max-connections=100
+ return 0
++ pgrep -x prometheus
+ kill -9 871
+ pgrep -x prometheus
./common_lib.sh: line 38:   871 Killed                  prometheus --web.max-connections=100 > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:11 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --web.external-url=the_external_url
Thu Dec 29 05:32:12 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:32:12.704Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:32:14 2022 - INFO  - Prometheus is ready.
+ curl -s http://localhost:9090
+ grep '<a href="/the_external_url">Found</a>.'
<a href="/the_external_url">Found</a>.
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.external-url'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.external-url'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 886
+ pgrep -x prometheus
./common_lib.sh: line 38:   886 Killed                  prometheus --web.external-url="the_external_url" > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:15 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --web.route-prefix=the_prefix
Thu Dec 29 05:32:16 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:32:27.090Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:32:27 2022 - INFO  - Prometheus is ready.
+ grep '<a href="/the_prefix">Found</a>.'
+ curl -s http://localhost:9090
<a href="/the_prefix">Found</a>.
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.route-prefix'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.route-prefix'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 912
+ pgrep -x prometheus
./common_lib.sh: line 38:   912 Killed                  prometheus --web.route-prefix="the_prefix" > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:29 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.user-assets'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.user-assets'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ prometheus --web.user-assets=./
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 956
+ pgrep -x prometheus
./common_lib.sh: line 38:   956 Killed                  prometheus --web.user-assets=./ > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:30 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --web.enable-lifecycle
Thu Dec 29 05:32:30 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:32:41.270Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:32:42 2022 - INFO  - Prometheus is ready.
+ curl -s -X POST http://localhost:9090/-/quit
Requesting termination... Goodbye!++ pgrep prometheus
+ CHECK_RESULT '' 1 0 'Failed to use flag: --web.enable-lifecycle'
+ actual_result=
+ expect_result=1
+ mode=0
+ error_log='Failed to use flag: --web.enable-lifecycle'
+ '[' -z '' ']'
+ LOG_ERROR 'Missing actual error code.'
+ message='Missing actual error code.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level error --message 'Missing actual error code.'
Thu Dec 29 05:32:43 2022 - ERROR - Missing actual error code.
+ return 1
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 1
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --web.enable-admin-api
Thu Dec 29 05:32:44 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:32:44.658Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:32:46 2022 - INFO  - Prometheus is ready.
+ grep '"status":"success"'
+ curl -s -X POST http://localhost:9090/api/v1/admin/tsdb/snapshot
{"status":"success","data":{"name":"20221228T213246Z-4d65822107fcfd52"}}
+ CHECK_RESULT 0 0 0 'Failed to use flag:  --web.enable-admin-api'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag:  --web.enable-admin-api'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1013
+ pgrep -x prometheus
./common_lib.sh: line 38:  1013 Killed                  prometheus --web.enable-admin-api > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:47 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.console.templates'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.console.templates'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ prometheus --web.console.templates=./
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1040
+ pgrep -x prometheus
./common_lib.sh: line 38:  1040 Killed                  prometheus --web.console.templates=./ > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:48 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.console.libraries'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.console.libraries'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ prometheus --web.console.libraries=./
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1055
+ pgrep -x prometheus
./common_lib.sh: line 38:  1055 Killed                  prometheus --web.console.libraries=./ > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:49 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus '--web.page-title=the title'
Thu Dec 29 05:32:50 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:32:50.855Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:32:52 2022 - INFO  - Prometheus is ready.
+ curl -s http://localhost:9090/config
+ grep '<title>the title</title>'
        <title>the title</title>
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.page-title'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.page-title'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1072
+ pgrep -x prometheus
./common_lib.sh: line 38:  1072 Killed                  prometheus --web.page-title="the title" > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:53 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --web.cors.origin'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --web.cors.origin'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ prometheus '--web.cors.origin=.*'
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1098
+ pgrep -x prometheus
./common_lib.sh: line 38:  1098 Killed                  prometheus --web.cors.origin=".*" > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:32:54 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --storage.tsdb.path=./the_data/
Thu Dec 29 05:32:55 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
level=info ts=2022-12-28T21:33:00.759Z caller=main.go:652 msg="Server is ready to receive web requests."
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:33:01 2022 - INFO  - Prometheus is ready.
++ ls ./the_data
++ grep -cE 'chunks_head|lock|queries.active|wal'
+ CHECK_RESULT 4 4 0 'Failed to use flag: --storage.tsdb.path'
+ actual_result=4
+ expect_result=4
+ mode=0
+ error_log='Failed to use flag: --storage.tsdb.path'
+ '[' -z 4 ']'
+ '[' 0 -eq 0 ']'
+ test 4x '!=' 4x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1113
+ pgrep -x prometheus
./common_lib.sh: line 38:  1113 Killed                  prometheus --storage.tsdb.path="./the_data/" > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:02 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 1
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.tsdb.retention'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.tsdb.retention'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ prometheus --storage.tsdb.retention=1m
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1153
+ pgrep -x prometheus
./common_lib.sh: line 38:  1153 Killed                  prometheus --storage.tsdb.retention=1m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:03 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.tsdb.retention.time'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.tsdb.retention.time'
+ '[' -z 0 ']'
+ prometheus --storage.tsdb.retention.time=1m
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1168
+ pgrep -x prometheus
./common_lib.sh: line 38:  1168 Killed                  prometheus --storage.tsdb.retention.time=1m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:04 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.tsdb.retention.size'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.tsdb.retention.size'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ prometheus --storage.tsdb.retention.size=1MB
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1183
+ pgrep -x prometheus
./common_lib.sh: line 38:  1183 Killed                  prometheus --storage.tsdb.retention.size=1MB > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:06 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ prometheus --storage.tsdb.no-lockfile
++ ls ./data
++ grep -cE lock
ls: cannot access './data': No such file or directory
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.tsdb.no-lockfile'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.tsdb.no-lockfile'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1198
+ pgrep -x prometheus
./common_lib.sh: line 38:  1198 Killed                  prometheus --storage.tsdb.no-lockfile > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:07 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.tsdb.allow-overlapping-blocks'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.tsdb.allow-overlapping-blocks'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ prometheus --storage.tsdb.allow-overlapping-blocks
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1218
+ pgrep -x prometheus
./common_lib.sh: line 38:  1218 Killed                  prometheus --storage.tsdb.allow-overlapping-blocks > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:08 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.tsdb.wal-compression'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.tsdb.wal-compression'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ prometheus --storage.tsdb.wal-compression
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1233
+ pgrep -x prometheus
./common_lib.sh: line 38:  1233 Killed                  prometheus --storage.tsdb.wal-compression > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:09 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.remote.flush-deadline'
+ prometheus --storage.remote.flush-deadline=1m
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.remote.flush-deadline'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1249
+ pgrep -x prometheus
./common_lib.sh: line 38:  1249 Killed                  prometheus --storage.remote.flush-deadline=1m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:10 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.remote.read-sample-limit'
+ prometheus --storage.remote.read-sample-limit=5
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.remote.read-sample-limit'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1262
+ pgrep -x prometheus
./common_lib.sh: line 38:  1262 Killed                  prometheus --storage.remote.read-sample-limit=5 > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:11 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.remote.read-concurrent-limit'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.remote.read-concurrent-limit'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ prometheus --storage.remote.read-concurrent-limit=5
+ return 0
++ pgrep -x prometheus
+ kill -9 1274
+ pgrep -x prometheus
./common_lib.sh: line 38:  1274 Killed                  prometheus --storage.remote.read-concurrent-limit=5 > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:12 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --storage.remote.read-max-bytes-in-frame'
+ prometheus --storage.remote.read-max-bytes-in-frame=100
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --storage.remote.read-max-bytes-in-frame'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1287
+ pgrep -x prometheus
./common_lib.sh: line 38:  1287 Killed                  prometheus --storage.remote.read-max-bytes-in-frame=100 > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:13 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --rules.alert.for-outage-tolerance'
+ prometheus --rules.alert.for-outage-tolerance=1h
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --rules.alert.for-outage-tolerance'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1302
+ pgrep -x prometheus
./common_lib.sh: line 38:  1302 Killed                  prometheus --rules.alert.for-outage-tolerance=1h > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:15 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --rules.alert.for-grace-period'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --rules.alert.for-grace-period'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ prometheus --rules.alert.for-grace-period=5m
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1316
+ pgrep -x prometheus
./common_lib.sh: line 38:  1316 Killed                  prometheus --rules.alert.for-grace-period=5m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:16 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --rules.alert.resend-delay'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --rules.alert.resend-delay'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ prometheus --rules.alert.resend-delay=5m
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1331
+ pgrep -x prometheus
./common_lib.sh: line 38:  1331 Killed                  prometheus --rules.alert.resend-delay=5m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:17 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --alertmanager.notification-queue-capacity'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --alertmanager.notification-queue-capacity'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ prometheus --alertmanager.notification-queue-capacity=100
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1346
+ pgrep -x prometheus
./common_lib.sh: line 38:  1346 Killed                  prometheus --alertmanager.notification-queue-capacity=100 > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:18 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --alertmanager.timeout'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --alertmanager.timeout'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ prometheus --alertmanager.timeout=5s
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1361
+ pgrep -x prometheus
./common_lib.sh: line 38:  1361 Killed                  prometheus --alertmanager.timeout=5s > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:19 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --query.lookback-delta'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --query.lookback-delta'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ prometheus --query.lookback-delta=2m
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1376
+ pgrep -x prometheus
./common_lib.sh: line 38:  1376 Killed                  prometheus --query.lookback-delta=2m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:20 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --query.timeout'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --query.timeout'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ prometheus --query.timeout=2m
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1390
+ pgrep -x prometheus
./common_lib.sh: line 38:  1390 Killed                  prometheus --query.timeout=2m > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:21 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --query.max-concurrency'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --query.max-concurrency'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ prometheus --query.max-concurrency=10
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1406
+ pgrep -x prometheus
./common_lib.sh: line 38:  1406 Killed                  prometheus --query.max-concurrency=10 > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:22 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --query.max-samples'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --query.max-samples'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ prometheus --query.max-samples=100
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1422
+ pgrep -x prometheus
./common_lib.sh: line 38:  1422 Killed                  prometheus --query.max-samples=100 > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:23 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ CHECK_RESULT 0 0 0 'Failed to use flag: --log.level'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --log.level'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ prometheus --log.level=debug
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1438
+ pgrep -x prometheus
./common_lib.sh: line 38:  1438 Killed                  prometheus --log.level=debug > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:24 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ wait_for_ready
+ LOG_INFO 'Waiting for Prometheus to be ready.'
+ message='Waiting for Prometheus to be ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Waiting for Prometheus to be ready.'
+ prometheus --log.format=json
Thu Dec 29 05:33:25 2022 - INFO  - Waiting for Prometheus to be ready.
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
+ sleep 1s
+ grep 'Server is ready to receive web requests.' ./prometheus.log
{"caller":"main.go:652","level":"info","msg":"Server is ready to receive web requests.","ts":"2022-12-28T21:33:31.241Z"}
+ LOG_INFO 'Prometheus is ready.'
+ message='Prometheus is ready.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Prometheus is ready.'
Thu Dec 29 05:33:32 2022 - INFO  - Prometheus is ready.
+ grep '"level":"info","msg":"Server is ready to receive web requests."' ./prometheus.log
{"caller":"main.go:652","level":"info","msg":"Server is ready to receive web requests.","ts":"2022-12-28T21:33:31.241Z"}
+ CHECK_RESULT 0 0 0 'Failed to use flag: --log.format'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Failed to use flag: --log.format'
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ clear_env
+ kill_process
+ is_running
+ pgrep -x prometheus
+ return 0
++ pgrep -x prometheus
+ kill -9 1453
+ pgrep -x prometheus
./common_lib.sh: line 38:  1453 Killed                  prometheus --log.format=json > prometheus.log 2>&1
+ LOG_INFO 'Succeed to terminate prometheus.'
+ message='Succeed to terminate prometheus.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Succeed to terminate prometheus.'
Thu Dec 29 05:33:33 2022 - INFO  - Succeed to terminate prometheus.
+ rm -rf ./data
+ rm -rf ./prometheus.log
+ rm -rf ./the_data
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Thu Dec 29 05:33:34 2022 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Thu Dec 29 05:33:35 2022 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start environment cleanup.'
+ message='Start environment cleanup.'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Start environment cleanup.'
Thu Dec 29 05:33:35 2022 - INFO  - Start environment cleanup.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmp1moeazll ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen-riscv/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmp1moeazll
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/mugen-riscv/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
Thu Dec 29 05:34:00 2022 - INFO  - Finish environment cleanup!
